<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Check if a product name indicates that its use is not authorized at the time — srppp_xml_product_use_not_authorized • srppphist</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Check if a product name indicates that its use is not authorized at the time — srppp_xml_product_use_not_authorized"><meta name="description" content='In most cases, products are not present in the XML file (source data),
if the "exhaustionDeadline" (German "Aufbrauchsfrist"), i.e. the date until
stocks of the product can still be rightully used is earlier than the date
of the publication the srppp.'><meta property="og:description" content='In most cases, products are not present in the XML file (source data),
if the "exhaustionDeadline" (German "Aufbrauchsfrist"), i.e. the date until
stocks of the product can still be rightully used is earlier than the date
of the publication the srppp.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">srppphist</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.0.9005</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/srppp_names_ais.html">Products with the same name but different active ingredients in the Swiss Register of Plant Protection Products</a></li>
    <li><a class="dropdown-item" href="../articles/srppp_trends.html">Trends of data contained in XML dumps of the Swiss Register of Plant Protection Products</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/agroscope-ch/srppphist/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Check if a product name indicates that its use is not authorized at the time</h1>
      <small class="dont-index">Source: <a href="https://github.com/agroscope-ch/srppphist/blob/main/R/products_not_authorized.R" class="external-link"><code>R/products_not_authorized.R</code></a></small>
      <div class="d-none name"><code>srppp_xml_product_use_not_authorized.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>In most cases, products are not present in the XML file (source data),
if the "exhaustionDeadline" (German "Aufbrauchsfrist"), i.e. the date until
stocks of the product can still be rightully used is earlier than the date
of the publication the srppp.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">srppp_xml_product_use_not_authorized</span><span class="op">(</span><span class="va">names</span>, <span class="va">year</span>, <span class="va">exhaustionDeadline</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-names">names<a class="anchor" aria-label="anchor" href="#arg-names"></a></dt>
<dd><p>Character vector of product names that should be checked</p></dd>


<dt id="arg-year">year<a class="anchor" aria-label="anchor" href="#arg-year"></a></dt>
<dd><p>The publication years</p></dd>


<dt id="arg-exhaustiondeadline">exhaustionDeadline<a class="anchor" aria-label="anchor" href="#arg-exhaustiondeadline"></a></dt>
<dd><p>The exhaustion deadlines</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Boolean (Does a comment in the name indicate that the use of the
product was not authorized at the time of publication of the file?)</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>However, in some cases, comments are amended to the product name that show
that they are not authorized. This is especially true for the year 2011,
where a number of products contain comments such as</p><ul><li><p>(Bew. suspendiert/Aut. suspendue/Aut. sospesa)</p></li>
<li><p>(Bew. beendet/Aut. révoquée/Aut. revocata)</p></li>
</ul><p>If such a comment is detected, the function returns TRUE.</p>
<p>Other comments indicate that authorisation to use the product is not clarified,
such as</p><ul><li><p>[Bewilligung beendet: Wegen hängigem Gerichtsverfahren gilt einstweilen folgende Aufbrauchfrist: 31.05.2022. Verkauf ist einstweilen weiterhin möglich.]</p></li>
</ul><p>In all but one of these cases, the date of the exhaustion deadline in the comment is
later than the date of the publication, therefore the function returns
FALSE. In the specific case of the product Allegro (W-5479) in the year 2022,
the exhaustion deadline given in the comment is before the publication of the
register. However, in that case the exhaustionDeadline in the dedicated
field is 31 August 2022, so it is assumed the use of the product was
authorized at least in a part of 2022.</p>
<p>Comments indicating that an authorization renewal is still in process are
not considered to indicate that the use was not authorized at the time
of publication. Examples for such comments are</p><ul><li><p>[Erneuerungsgesuch in Bearbeitung]</p></li>
<li><p>(demande de renouvellement en cours)</p></li>
</ul><p>Such comments are frequently found in the registers published in 2016 and 2017,
but also occur in later years.</p>
<p>Finally, in the register for 2020 there are a number of products where an
exhaustion date of 31 December 2019 is indicated in the comment, and in the
register for 2022, there are two products where an exhaustion date of
31 December 2021 is indicated. In these cases, the function returns TRUE.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">srppp_list</span><span class="op">[[</span><span class="st">"2011"</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">products</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>nonauth <span class="op">=</span> <span class="fu">srppp_xml_product_use_not_authorized</span><span class="op">(</span><span class="va">name</span>, <span class="fl">2011</span>, <span class="va">exhaustionDeadline</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">pNbr</span><span class="op">:</span><span class="va">soldoutDeadline</span>, <span class="va">nonauth</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 20 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     pNbr wNbr  name                   exhaustionDeadline soldoutDeadline nonauth</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>    38 18    Thiovit Jet            <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>   249 366   Cuproford (Bew. suspe… <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              TRUE   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>   407 492   Gesin                  <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>   585 519   Oxykupfer 50 / Oxycui… <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>   680 598   Gaschell - Baumwachs   <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>   797 669   Vitigran 50            <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>   980 839   Herbexit               <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>   989 806   M-Special (Bew. beend… <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              TRUE   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>090 852   Limax Plus             <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">1</span>109 888   Sufralo                <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span>  <span style="text-decoration: underline;">1</span>109 888-1 Capito Bio-Schwefel    <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span>  <span style="text-decoration: underline;">1</span>182 923   Divopan                <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span>  <span style="text-decoration: underline;">1</span>192 934   Trifolin               <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span>  <span style="text-decoration: underline;">1</span>261 751   Extravon - Netzmittel… <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              TRUE   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span>  <span style="text-decoration: underline;">1</span>262 988   Schneckenkorn PS       <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span>  <span style="text-decoration: underline;">1</span>263 986   Elosal Supra           <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">17</span>  <span style="text-decoration: underline;">1</span>316 1022  Maneb Omya             <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">18</span>  <span style="text-decoration: underline;">1</span>324 1027  Simaneb (Bew. suspend… <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              TRUE   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">19</span>  <span style="text-decoration: underline;">1</span>345 1076  Reglone                <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">20</span>  <span style="text-decoration: underline;">1</span>346 1066  Thiodan Spritzpulver … <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              TRUE   </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">srppp_list</span><span class="op">[[</span><span class="st">"2016"</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">products</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>nonauth <span class="op">=</span> <span class="fu">srppp_xml_product_use_not_authorized</span><span class="op">(</span><span class="va">name</span>, <span class="fl">2016</span>, <span class="va">exhaustionDeadline</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">pNbr</span><span class="op">:</span><span class="va">soldoutDeadline</span>, <span class="va">nonauth</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 20 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     pNbr wNbr   name                  exhaustionDeadline soldoutDeadline nonauth</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>    38 18     Thiovit Jet           <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>    38 18-1   Sufralo               <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>    38 18-2   Capito Bio-Schwefel   <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>    38 18-3   Sanoplant Schwefel    <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>   407 492    Gesin                 <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>   585 519    Oxykupfer 50 / Oxycu… <span style="color: #949494;">"</span>2017-07-31<span style="color: #949494;">"</span>       <span style="color: #949494;">"</span>2016-07-31<span style="color: #949494;">"</span>    FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>   585 519-1  Capito Cupro          <span style="color: #949494;">"</span>2017-07-31<span style="color: #949494;">"</span>       <span style="color: #949494;">"</span>2016-07-31<span style="color: #949494;">"</span>    FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>   797 669    Vitigran 50           <span style="color: #949494;">"</span>2017-07-31<span style="color: #949494;">"</span>       <span style="color: #949494;">"</span>2016-07-31<span style="color: #949494;">"</span>    FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>   980 839    Herbexit              <span style="color: #949494;">"</span>2017-07-31<span style="color: #949494;">"</span>       <span style="color: #949494;">"</span>2016-07-31<span style="color: #949494;">"</span>    FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">1</span>090 852    Limax Plus            <span style="color: #949494;">"</span>2017-07-31<span style="color: #949494;">"</span>       <span style="color: #949494;">"</span>2016-07-31<span style="color: #949494;">"</span>    FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span>  <span style="text-decoration: underline;">1</span>109 888    Sufralo               <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span>  <span style="text-decoration: underline;">1</span>109 888-1  Capito Bio-Schwefel   <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span>  <span style="text-decoration: underline;">1</span>182 923    Divopan               <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span>  <span style="text-decoration: underline;">1</span>192 934    Trifolin              <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span>  <span style="text-decoration: underline;">1</span>262 988    Schneckenkorn PS      <span style="color: #949494;">"</span>2017-07-31<span style="color: #949494;">"</span>       <span style="color: #949494;">"</span>2016-07-31<span style="color: #949494;">"</span>    FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span>  <span style="text-decoration: underline;">1</span>263 986    Elosal Supra          <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">17</span>  <span style="text-decoration: underline;">1</span>316 1022   Maneb Omya            <span style="color: #949494;">"</span>2017-07-31<span style="color: #949494;">"</span>       <span style="color: #949494;">"</span>2016-07-31<span style="color: #949494;">"</span>    FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">18</span>  <span style="text-decoration: underline;">1</span>345 1076   Reglone               <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">19</span>  <span style="text-decoration: underline;">1</span>345 1076-1 Reglone               <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">20</span>  <span style="text-decoration: underline;">1</span>345 1076-2 Reglone               <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Special case Allegro: There is a conflict of information (see text)</span></span></span>
<span class="r-in"><span><span class="va">srppp_list</span><span class="op">[[</span><span class="st">"2022"</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">products</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Allegro"</span>, <span class="va">name</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">pNbr</span>, <span class="va">wNbr</span>, <span class="va">name</span>, <span class="va">exhaustionDeadline</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   pNbr   wNbr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 6501   5479</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 6501 5479-1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                                                                                                                                                                                                  name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Allegro [Bewilligung beendet / Autorisation révoquée / Autorizzazione revocata: Ausverkaufsfrist / Délai d'écoulement des stocks / Termine per la svendita: 30.09.2021, Aufbrauchsfrist / Délai d'utilisation / Termine per l'utilizzo: 31.10.2021]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                          Allegro [Wegen hängigem Gerichtsverfahren gelten einstweilen folgende Fristen: / À cause d'une procédure légale, ces délais provisoires s'appliquent: / Causa procedura legale valgono provvisoriamente queste scadenze: ]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   exhaustionDeadline</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         2022-08-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         2022-08-31</span>
<span class="r-in"><span><span class="va">example_years</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">:</span><span class="fl">2022</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">example_years</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">example_years</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">example_years</span>, <span class="kw">function</span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">sr</span> <span class="op">&lt;-</span> <span class="va">srppp_list</span><span class="op">[[</span><span class="va">year</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span>  <span class="va">sr</span><span class="op">$</span><span class="va">products</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>nonauth <span class="op">=</span> <span class="fu">srppp_xml_product_use_not_authorized</span><span class="op">(</span><span class="va">name</span>, <span class="va">year</span>, <span class="va">exhaustionDeadline</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">pNbr</span><span class="op">:</span><span class="va">soldoutDeadline</span>, <span class="va">nonauth</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Allegro"</span>, <span class="va">name</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/list_c.html" class="external-link">list_rbind</a></span><span class="op">(</span>names_to <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 8 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   year   pNbr wNbr   name             exhaustionDeadline soldoutDeadline nonauth</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 2019   <span style="text-decoration: underline;">6</span>501 5479   <span style="color: #949494;">"</span>Allegro <span style="color: #949494;">"</span>       <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 2019   <span style="text-decoration: underline;">6</span>501 5479-1 <span style="color: #949494;">"</span>Allegro<span style="color: #949494;">"</span>        <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> 2020   <span style="text-decoration: underline;">6</span>501 5479   <span style="color: #949494;">"</span>Allegro <span style="color: #949494;">"</span>       <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> 2020   <span style="text-decoration: underline;">6</span>501 5479-1 <span style="color: #949494;">"</span>Allegro<span style="color: #949494;">"</span>        <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> 2021   <span style="text-decoration: underline;">6</span>501 5479   <span style="color: #949494;">"</span>Allegro <span style="color: #949494;">"</span>       <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> 2021   <span style="text-decoration: underline;">6</span>501 5479-1 <span style="color: #949494;">"</span>Allegro<span style="color: #949494;">"</span>        <span style="color: #949494;">""</span>                 <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span> 2022   <span style="text-decoration: underline;">6</span>501 5479   <span style="color: #949494;">"</span>Allegro [Bewil… <span style="color: #949494;">"</span>2022-08-31<span style="color: #949494;">"</span>       <span style="color: #949494;">""</span>              FALSE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">8</span> 2022   <span style="text-decoration: underline;">6</span>501 5479-1 <span style="color: #949494;">"</span>Allegro [Wegen… <span style="color: #949494;">"</span>2022-08-31<span style="color: #949494;">"</span>       <span style="color: #949494;">"</span>2021-12-31<span style="color: #949494;">"</span>    FALSE  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">example_years</span>, <span class="kw">function</span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">sr</span> <span class="op">&lt;-</span> <span class="va">srppp_list</span><span class="op">[[</span><span class="va">year</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span>  <span class="va">sr</span><span class="op">$</span><span class="va">products</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>nonauth <span class="op">=</span> <span class="fu">srppp_xml_product_use_not_authorized</span><span class="op">(</span><span class="va">name</span>, <span class="va">year</span>, <span class="va">exhaustionDeadline</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">pNbr</span><span class="op">:</span><span class="va">soldoutDeadline</span>, <span class="va">nonauth</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Aufbrauch"</span>, <span class="va">name</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/list_c.html" class="external-link">list_rbind</a></span><span class="op">(</span>names_to <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   year pNbr wNbr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2020 2494 1997</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2020 3614 2831</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                                                                                                                          name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                       Cortilan  [Ausverkaufs- und Aufbrauchsfrist / Délai d'écoulement des stocks et d'utilisation / Termine per la svendita e per l'utilizzo: 30.06.2020] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Rover [Ausverkaufsfrist / Délai d'écoulement des stocks / Termine per la svendita : 10.12.2019; Aufbrauchsfrist / Délai d'utilisation / Termine per l'utilizzo: 31.12.2019]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   exhaustionDeadline soldoutDeadline nonauth</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                                      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                                       TRUE</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Johannes Ranke.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

